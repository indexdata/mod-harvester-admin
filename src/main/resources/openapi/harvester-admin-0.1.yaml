# WARNING: harvester-admin-0.1.yaml file is autogenerated from harvester-admin-0.1.yaml.m4
# DO NOT EDIT IT DIRECTLY or your changes will be lost

openapi: 3.0.0
info:
  title: Harvester Admin API
  version: v0.1
paths:
  /harvester-admin/harvestables:
    get:
      description: Get brief harvest job definitions
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/harvestables.json
        "500":
          $ref: "#/components/responses/trait_500"
    post:
      description: Create new harvest job definition
      requestBody:
        content:
          application/json:
            schema:
              $ref: schema/harvestableBrief.json
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: schema/harvestableBrief.json
        "400":
          $ref: "#/components/responses/trait_400"
        "500":
          $ref: "#/components/responses/trait_500"
    delete:
      description: Delete all harvest job definitions
      responses:
        "204":
          description: No content
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
  /harvester-admin/harvestables/{id}:
    get:
      description: Get detailed harvest job definition
      responses:
        "200":
          description: OK
          content:
            application/json:
              example:
                $ref: example/harvestable.json
              schema:
                $ref: schema/harvestableBrief.json
        "500":
          $ref: "#/components/responses/trait_500"
    put:
      description: Update a harvest job definition
      requestBody:
        content:
          application/json:
            schema:
              $ref: schema/harvestableBrief.json
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/harvestableBrief.json
        "400":
          $ref: "#/components/responses/trait_400"
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
    delete:
      description: Delete a harvest job definition
      responses:
        "204":
          description: No content
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
  /harvester-admin/jobs/run/{id}:
    put:
      description: Starts a harvest job immediately if possible
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/jobStarted.json
        "400":
          $ref: "#/components/responses/trait_400"
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
  /harvester-admin/jobs/stop/{id}:
    put:
      description: Stops a harvest job
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: schema/jobStopped.json
        "400":
          $ref: "#/components/responses/trait_400"
        "500":
          $ref: "#/components/responses/trait_500"
  /harvester-admin/storages:
    get:
      description: Get brief storage definition records
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/storages.json
        "500":
          $ref: "#/components/responses/trait_500"
    post:
      description: Create new storage definition
      requestBody:
        content:
          application/json:
            schema:
              $ref: schema/storageBrief.json
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: schema/storageBrief.json
        "400":
          $ref: "#/components/responses/trait_400"
        "500":
          $ref: "#/components/responses/trait_500"
    delete:
      description: Delete all storage definitions
      responses:
        "204":
          description: No content
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
  /harvester-admin/storages/{id}:
    get:
      description: Get detailed storage definition record
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/storageBrief.json
        "500":
          $ref: "#/components/responses/trait_500"
    put:
      description: Update a storage definition
      requestBody:
        content:
          application/json:
            schema:
              $ref: schema/storageBrief.json
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/storageBrief.json
        "400":
          $ref: "#/components/responses/trait_400"
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
    delete:
      description: Delete a storage definition
      responses:
        "204":
          description: No content
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
  /harvester-admin/transformations:
    get:
      description: Get brief transformation definition records
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/transformations.json
        "500":
          $ref: "#/components/responses/trait_500"
    post:
      description: Create new transformation definition
      requestBody:
        content:
          application/json:
            schema:
              $ref: schema/transformationBrief.json
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: schema/transformationBrief.json
        "400":
          $ref: "#/components/responses/trait_400"
        "500":
          $ref: "#/components/responses/trait_500"
    delete:
      description: Delete all transformation definitions
      responses:
        "204":
          description: No content
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
  /harvester-admin/transformations/{id}:
    get:
      description: Get detailed transformation definition record
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/transformationBrief.json
        "500":
          $ref: "#/components/responses/trait_500"
    put:
      description: Update a transformation definition
      requestBody:
        content:
          application/json:
            schema:
              $ref: schema/transformationBrief.json
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/transformationBrief.json
        "400":
          $ref: "#/components/responses/trait_400"
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
    delete:
      description: Delete a transformation definition
      responses:
        "204":
          description: No content
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
  /harvester-admin/steps:
    get:
      description: Get brief transformation step definition records
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/steps.json
        "500":
          $ref: "#/components/responses/trait_500"
    post:
      description: Create new transformation step definition
      requestBody:
        content:
          application/json:
            schema:
              $ref: schema/stepBrief.json
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: schema/stepBrief.json
        "400":
          $ref: "#/components/responses/trait_400"
        "500":
          $ref: "#/components/responses/trait_500"
    delete:
      description: Delete all transformation step definitions
      responses:
        "204":
          description: No content
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
  /harvester-admin/steps/{id}:
    get:
      description: Get detailed transformation set definition record
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/stepBrief.json
        "500":
          $ref: "#/components/responses/trait_500"
    put:
      description: Update a transformation step definition
      requestBody:
        content:
          application/json:
            schema:
              $ref: schema/stepBrief.json
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/stepBrief.json
        "400":
          $ref: "#/components/responses/trait_400"
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
    delete:
      description: Delete a transformation step definition
      responses:
        "204":
          description: No content
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
  /harvester-admin/steps/{id}/script:
    get:
      description: Get transformation step script
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/script.json
        "500":
          $ref: "#/components/responses/trait_500"
    put:
      description: Update a transformation step script
      requestBody:
        content:
          application/json:
            schema:
              $ref: schema/script.json
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/script.json
        "400":
          $ref: "#/components/responses/trait_400"
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
  /harvester-admin/tsas:
    get:
      description: Get transformation step association records
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/transformationStepAssociations.json
        "500":
          $ref: "#/components/responses/trait_500"
    post:
      description: Create new transformation step association
      requestBody:
        content:
          application/json:
            schema:
              $ref: schema/transformationStepAssociation.json
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: schema/transformationStepAssociation.json
        "400":
          $ref: "#/components/responses/trait_400"
        "500":
          $ref: "#/components/responses/trait_500"
    delete:
      description: Delete all transformation step associations
      responses:
        "204":
          description: No content
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
  /harvester-admin/tsas/{id}:
    get:
      description: Get transformation step association record
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/transformationStepAssociation.json
        "500":
          $ref: "#/components/responses/trait_500"
    put:
      description: Update a transformation step association
      requestBody:
        content:
          application/json:
            schema:
              $ref: schema/transformationStepAssociation.json
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: schema/transformationStepAssociation.json
        "400":
          $ref: "#/components/responses/trait_400"
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
    delete:
      description: Delete a transformation step association
      responses:
        "204":
          description: No content
        "404":
          $ref: "#/components/responses/trait_404"
        "500":
          $ref: "#/components/responses/trait_500"
components:
  responses:
    trait_400:
      description: Bad request
      content:
        text/plain:
          schema:
            type: string
            example: Invalid JSON in request
    trait_404:
      description: Not Found
      content:
        text/plain:
          schema:
            type: string
            example: 1234 not found
    trait_422:
      description: Unprocessable entity
      content:
        text/plain:
          schema:
            type: string
            example: Record already exists
    trait_500:
      description: Internal error
      content:
        text/plain:
          schema:
            type: string
            example: Internal server error, contact administrator
